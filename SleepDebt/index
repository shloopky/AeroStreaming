<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AeroStream - Private</title>
    <style>
        /* [Keeping your Frutiger Aero CSS from before] */
        body { background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%); font-family: 'Segoe UI', sans-serif; margin: 0; height: 100vh; display: flex; flex-direction: column; }
        header { background: rgba(255, 255, 255, 0.4); backdrop-filter: blur(10px); padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.5); }
        .container { display: grid; grid-template-columns: 1fr 350px; gap: 20px; padding: 20px; flex-grow: 1; }
        .glass-panel { background: rgba(255, 255, 255, 0.3); border: 1px solid white; border-radius: 20px; backdrop-filter: blur(10px); box-shadow: 0 8px 32px rgba(0,0,0,0.1); }
        video { width: 100%; background: #000; border-radius: 20px 20px 0 0; }
        .controls { padding: 15px; background: rgba(255,255,255,0.5); border-radius: 0 0 20px 20px; display: flex; align-items: center; gap: 15px; }
        .aero-btn { background: linear-gradient(#7abcff, #4096ee); border: 1px solid #1e5799; border-radius: 20px; color: white; padding: 8px 20px; font-weight: bold; cursor: pointer; }
        #live-badge { display: none; background: red; color: white; padding: 2px 8px; border-radius: 5px; font-size: 12px; font-weight: bold; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        .chat-box { display: flex; flex-direction: column; height: 100%; overflow: hidden; }
        #chat-messages { flex-grow: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .chat-msg { background: rgba(255,255,255,0.6); padding: 8px 12px; border-radius: 12px; font-size: 14px; border-left: 4px solid #0078d7; }
    </style>
</head>
<body>

<header>
    <div style="font-size: 24px; font-weight: bold; color: #0078d7;">AeroStream <span id="live-badge">LIVE</span></div>
    <div id="user-display">Welcome, Guest!</div>
</header>

<div class="container">
    <div class="video-area">
        <div class="glass-panel" style="overflow: hidden;">
            <video id="main-player" autoplay playsinline></video>
            <div class="controls">
                <button id="start-btn" class="aero-btn" onclick="startYourStream()" style="display:none;">Go Live</button>
                <button id="stop-btn" class="aero-btn" onclick="stopYourStream()" style="display:none; background: red;">End Stream</button>
                <div id="status-text" style="font-size: 13px; color: #555;">Viewer Mode</div>
                <div style="margin-left: auto; font-size: 13px;">üëÅÔ∏è <span id="view-count">1</span> Watching</div>
            </div>
        </div>
        <div id="admin-tools" class="glass-panel" style="margin-top: 20px; padding: 20px; display: none;">
            <h4 style="margin:0 0 10px 0;">Streamer Dashboard (Shloopky Only)</h4>
            <input type="text" id="stream-title" placeholder="Stream Title..." style="padding:8px; border-radius:10px; border:1px solid #ccc;">
            <button class="aero-btn" onclick="alert('Title Updated!')">Update Title</button>
        </div>
    </div>

    <div class="chat-box glass-panel">
        <div style="background: rgba(0,120,215,0.8); color: white; padding: 10px; text-align: center; font-weight: bold;">Chat</div>
        <div id="chat-messages"></div>
        <div style="padding: 10px; background: white; display: flex; gap: 5px;">
            <input type="text" id="chat-input" placeholder="Chat as Guest..." style="flex-grow:1;">
            <button class="aero-btn" onclick="sendChat()">Send</button>
        </div>
    </div>
</div>

<div id="login-overlay" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(161, 196, 253, 0.9); display:flex; justify-content:center; align-items:center; z-index:100;">
    <div class="glass-panel" style="padding: 30px; width: 300px; text-align: center;">
        <h2 style="color:#0078d7;">Sign In</h2>
        <input type="text" id="user-in" placeholder="Username" style="width:90%; padding:10px; margin-bottom:10px; border-radius:10px; border:1px solid #ccc;"><br>
        <input type="password" id="pass-in" placeholder="Password" style="width:90%; padding:10px; margin-bottom:20px; border-radius:10px; border:1px solid #ccc;"><br>
        <button class="aero-btn" onclick="doLogin()">Login</button>
    </div>
</div>

<script>
    let currentUser = null;
    let localStream = null;

    function doLogin() {
        const u = document.getElementById('user-in').value;
        const p = document.getElementById('pass-in').value;

        // Hardcoded check for Shloopky
        if(u === "Shloopky" && p === "shloop123") {
            currentUser = "Shloopky";
        } else {
            currentUser = u || "Guest";
        }

        document.getElementById('login-overlay').style.display = "none";
        document.getElementById('user-display').innerHTML = `Logged in as: <b>${currentUser}</b>`;
        
        // SETUP PERMISSIONS
        if(currentUser === "Shloopky") {
            document.getElementById('start-btn').style.display = "block";
            document.getElementById('admin-tools').style.display = "block";
            document.getElementById('status-text').innerHTML = "Ready to Stream";
        }
    }

    async function startYourStream() {
        try {
            localStream = await navigator.mediaDevices.getDisplayMedia({ video: true, audio: true });
            document.getElementById('main-player').srcObject = localStream;
            document.getElementById('live-badge').style.display = "inline";
            document.getElementById('start-btn').style.display = "none";
            document.getElementById('stop-btn').style.display = "block";
            document.getElementById('status-text').innerHTML = "üî¥ BROADCASTING";
        } catch(e) { alert("Could not capture screen."); }
    }

    function stopYourStream() {
        localStream.getTracks().forEach(t => t.stop());
        document.getElementById('main-player').srcObject = null;
        document.getElementById('live-badge').style.display = "none";
        document.getElementById('start-btn').style.display = "block";
        document.getElementById('stop-btn').style.display = "none";
        document.getElementById('status-text').innerHTML = "Stream Ended";
    }

    function sendChat() {
        const input = document.getElementById('chat-input');
        if(!input.value) return;
        const msg = document.createElement('div');
        msg.className = "chat-msg";
        msg.innerHTML = `<b>${currentUser}:</b> ${input.value}`;
        document.getElementById('chat-messages').appendChild(msg);
        
        // TTS
        const speech = new SpeechSynthesisUtterance(input.value);
        window.speechSynthesis.speak(speech);
        
        input.value = "";
        const c = document.getElementById('chat-messages');
        c.scrollTop = c.scrollHeight;
    }
</script>
</body>
</html>